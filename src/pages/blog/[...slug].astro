---
import { getCollection } from 'astro:content';
import Layout from '../../layouts/Layout.astro';

export async function getStaticPaths() {
	const posts = await getCollection('blog');
	return posts.map((post) => ({
		params: { slug: post.slug },
		props: post,
	}));
}

const post = Astro.props;
const { Content } = await post.render();
---

<Layout title={post.data.title} description={post.data.title}>
	<article class="prose prose-invert prose-lg max-w-none">
		<header class="mb-8 not-prose">
			<h1 class="text-3xl md:text-5xl font-bold bg-gradient-to-r from-blue-400 to-teal-400 bg-clip-text text-transparent mb-4">
				{post.data.title}
			</h1>
			<div class="text-slate-400 text-sm flex gap-4">
				{post.data.date && <time datetime={post.data.date.toISOString()}>
					{post.data.date.toLocaleDateString('en-US', {
						year: 'numeric',
						month: 'long',
						day: 'numeric',
					})}
				</time>}
				{post.data.categories && (
					<span class="text-slate-500">
						In: {post.data.categories}
					</span>
				)}
			</div>
		</header>
		<Content />
	</article>
</Layout>
